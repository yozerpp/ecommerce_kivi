@using Castle.Components.DictionaryAdapter.Xml
@using Ecommerce.Entity
@model _CategoryPicker

<ul class="d-flex flex-grow-1 list-group rounded-1 shadow-sm overflow-x-visible">
    @{
        var onClickHandler = $@"document.getElementById('{Model.DisplayElementId}').innerHTML=event.currentTarget.getAttribute('data-name');
                                const cid = event.currentTarget.getAttribute('data-id');const categoryProps = document.getElementById('{Model.TargetElementId}');
                                categoryProps.setAttribute('hx-vals', JSON.stringify({{categoryId: cid}}));
                                categoryProps.dispatchEvent(new Event('fire', {{cancelable:true, bubbles:true}}));document.getElementById('{Model.InputElementId}').value=cid;
                              ";
    }
    @await Html.PartialAsync("Shared/SearchBar/_CategoryItemPartial", ($"document.getElementById('{Model.DisplayElementId}').innerHTML='Tümü';document.getElementById('{Model.TargetElementId}').innerHTML='';document.getElementById('{Model.InputElementId}').value=null;", new Category(){Name = "Tümü", Id = 0}, new HashSet<Category>()))
    @foreach (var category in Model.Categories){
        <partial name="Shared/SearchBar/_CategoryItemPartial" model="(onClickHandler, category, new HashSet<Category>())"/>
    }
</ul>