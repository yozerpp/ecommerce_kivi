@model _DimensionsPartial
<div class="d-flex gap-3 my-2 dimensions-container" 
     data-weight="@Model.Dimensions.Weight" 
     data-width="@Model.Dimensions.Width" 
     data-height="@Model.Dimensions.Height" 
     data-depth="@Model.Dimensions.Depth">
    
    <div class="d-flex align-items-center gap-2">
        <span class="text-muted small">Ağırlık:</span>
        <span class="badge bg-light text-dark editable-field" data-field="weight">@Model.Dimensions.Weight kg</span>
    </div>
    
    <div class="d-flex align-items-center gap-2">
        <span class="text-muted small">Boyutlar:</span>
        <span class="badge bg-light text-dark editable-field" data-field="width">@Model.Dimensions.Width</span>×<span class="badge bg-light text-dark editable-field" data-field="height">@Model.Dimensions.Height</span>×<span class="badge bg-light text-dark editable-field" data-field="depth">@Model.Dimensions.Depth</span>
        <span class="text-muted small">cm</span>
    </div>
    
    @if (Model.Editable)
    {
        @await Html.PartialAsync("Shared/_EditablePartial", new _EditablePartial(){
            Target = "dimensions-container",
            OnClick = ""
        })
    }
</div>

<script>
    ((script) => {
        const container = script.previousElementSibling;
        
        // Export current values to parent element
        container.weight = parseFloat(container.dataset.weight);
        container.width = parseFloat(container.dataset.width);
        container.height = parseFloat(container.dataset.height);
        container.depth = parseFloat(container.dataset.depth);
        
        // Handle content changes
        container.addEventListener('contentChanged', (e) => {
            if (e.target.classList.contains('editable-field')) {
                const field = e.target.dataset.field;
                const value = parseFloat(e.target.textContent.replace(/[^\d.]/g, ''));
                
                if (!isNaN(value)) {
                    container[field] = value;
                    container.dataset[field] = value;
                    
                    // Update display with proper formatting
                    if (field === 'weight') {
                        e.target.textContent = value + ' kg';
                    } else {
                        e.target.textContent = value;
                    }
                }
            }
        });
        
    })(document.currentScript);
</script>
