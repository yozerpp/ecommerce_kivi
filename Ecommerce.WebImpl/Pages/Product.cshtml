@page
@model Ecommerce.WebImpl.Pages.Product
@using System.Globalization
@using System.Reflection
@using Ecommerce.Entity
@using Ecommerce.Entity.Common
@using Ecommerce.Entity.Views
@using Ecommerce.WebImpl.Pages.Shared
@using Ecommerce.WebImpl.Pages.Shared.Product
@using Ecommerce.WebImpl.Pages.Shared.Review

@{
    Layout = "Shared/_Layout";
    var editable = Model.CurrentStaff!=null && Model.CurrentStaff.HasPermission(Permission.EditProduct) || Model.CurrentSeller!=null && 
                   Model.Offers.Any(o=>o.SellerId == Model.CurrentSeller?.Id);
    ViewBag.User = Model.CurrentUser;
    var sellersOffer = Model.Offers.FirstOrDefault(o=>o.SellerId == Model.CurrentSeller?.Id);
}
@await Html.PartialAsync("Shared/Product/_ProductMainPartial", new _ProductMainPartial(){
    Categories = Model.Categories,
    Editable = editable, Favorites = Model.Favorites, SellerOffer = sellersOffer, ViewedProduct = Model.ViewedProduct,
})
@section Scripts{

}
